(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-304c90a0"],{"73a2":function(e,t,a){},"91e2":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-mgr"},[a("div",{staticClass:"title"},[a("span",{staticClass:"title-text"},[e._v("用 户 管 理")]),a("span",{staticClass:"title-text-small"},[e._v("User Management")]),a("div",{staticClass:"title-btn"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"创建用户",placement:"left"}},[a("el-button",{attrs:{type:"success",icon:"el-icon-plus",circle:""},on:{click:e.handleCreateOpen}})],1)],1)]),a("el-divider"),a("div",{ref:"userTable",staticClass:"user"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.userLoding,expression:"userLoding"}],staticStyle:{width:"100%"},attrs:{data:e.userList,"max-height":e.userListHeight}},[a("el-table-column",{attrs:{prop:"uid",label:"ID","min-width":"30",sortable:""}}),a("el-table-column",{attrs:{prop:"uname",label:"用户名","min-width":"40"}}),a("el-table-column",{attrs:{prop:"umail",label:"邮箱","min-width":"60"}}),a("el-table-column",{attrs:{prop:"utime",label:"注册时间","min-width":"40",sortable:"",formatter:e.dateFormat}}),a("el-table-column",{attrs:{prop:"aname",label:"用户组","min-width":"20",sortable:""}}),a("el-table-column",{attrs:{prop:"ustat",label:"状态","min-width":"30",sortable:"",formatter:e.statusFormat}}),a("el-table-column",{attrs:{label:"操作","min-width":"20"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.ustat?a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row.uid)}}}):e._e()]}}])})],1)],1),a("div",{ref:"userPag",staticClass:"user-pagination"},[a("el-pagination",{attrs:{layout:"total, prev, pager, next","current-page":e.query.pageIndex,"page-size":e.query.pageSize,total:e.pageTotal},on:{"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"新 增 用 户",visible:e.createDialogVisible,width:"40%",top:"15vh","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,"destroy-on-close":!0,center:""},on:{"update:visible":function(t){e.createDialogVisible=t}}},[a("div",{staticClass:"createFormDiv"},[a("el-form",{ref:"createForm",attrs:{"label-position":"left",model:e.userCreate,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{maxlength:"18","show-word-limit":""},model:{value:e.userCreate.uname,callback:function(t){e.$set(e.userCreate,"uname",t)},expression:"userCreate.uname"}})],1),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{type:"password",maxlength:"24"},model:{value:e.userCreate.upass,callback:function(t){e.$set(e.userCreate,"upass",t)},expression:"userCreate.upass"}})],1),a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{attrs:{maxlength:"56","show-word-limit":""},model:{value:e.userCreate.umail,callback:function(t){e.$set(e.userCreate,"umail",t)},expression:"userCreate.umail"}})],1),a("el-form-item",{attrs:{label:"用户组"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.userCreate.aid,callback:function(t){e.$set(e.userCreate,"aid",t)},expression:"userCreate.aid"}},e._l(e.authList,(function(e){return a("el-option",{key:e.aid,attrs:{label:e.aname,value:e.aid}})})),1)],1)],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleCreateClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.createUser}},[e._v("确 定")])],1)])],1)},r=[],i=a("7f45"),n=a.n(i),l={name:"UserMgr",data:function(){return{query:{pageIndex:1,pageSize:10},pageTotal:0,userListHeight:.75*window.innerHeight,userList:[],userCreate:{uname:"",upass:"",umail:"",aid:1},userLoding:!0,createDialogVisible:!1}},created:function(){var e=this;this.$axios.get("/api/auth").then((function(t){1===t.data.code?e.authList=t.data.data:e.$message({message:"系统错误",type:"error"})})).catch((function(){e.$message({message:"网络错误",type:"error"})})),this.getUserList(this.query.pageIndex)},methods:{handleDelete:function(e){var t=this;this.$confirm("确认删除/封禁用户（ID："+e+"）?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteUser(e)}))},handleCurrentChange:function(e){this.query.pageIndex=e,this.getUserList(this.query.pageIndex)},handleCreateOpen:function(){this.userCreate.uname="",this.userCreate.upass="",this.userCreate.umail="",this.userCreate.aid=1,this.createDialogVisible=!0},handleCreateClose:function(){this.userCreate.uname="",this.userCreate.upass="",this.userCreate.umail="",this.userCreate.aid=1,this.createDialogVisible=!1},dateFormat:function(e,t){var a=e[t.property];return void 0===a?"":n()(a).tz("Asia/Shanghai").format("YYYY-MM-DD HH:mm:ss")},statusFormat:function(e,t){var a=e[t.property];return void 0===a?"":1===a?"删除/封禁":"正常"},getUserList:function(e){var t=this;this.userLoding=!0,this.$axios.get("/api/users",{params:{page:e}}).then((function(e){1===e.data.code&&(t.userList=e.data.data.list,t.pageTotal=e.data.data.total,t.userLoding=!1)}))},deleteUser:function(e){var t=this;this.$axios.delete("/api/users/"+e).then((function(e){1===e.data.code?t.$message({message:"删除/封禁用户成功",type:"success"}):t.$message({message:"系统错误或权限不足",type:"error"}),t.getUserList(t.query.pageIndex)})).catch((function(){t.$message({message:"网络错误",type:"error"})}))},createUser:function(){var e=this;this.$axios.post("/api/users",this.userCreate).then((function(t){1===t.data.code?e.$message({message:"添加用户成功",type:"success"}):e.$message({message:"系统错误或权限不足",type:"error"}),e.handleCreateClose(),e.getUserList(e.query.pageIndex)})).catch((function(){e.$message({message:"网络错误",type:"error"})}))}}},o=l,u=(a("dd4e"),a("2877")),c=Object(u["a"])(o,s,r,!1,null,"1fc8134e",null);t["default"]=c.exports},dd4e:function(e,t,a){"use strict";var s=a("73a2"),r=a.n(s);r.a}}]);
//# sourceMappingURL=chunk-304c90a0.de6ab9c2.js.map
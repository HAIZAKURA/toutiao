(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f866c18"],{3607:function(e,t,a){"use strict";var i=a("668b"),r=a.n(i);r.a},"668b":function(e,t,a){},c972:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"thread-mgr"},[a("div",{staticClass:"title"},[a("span",{staticClass:"title-text"},[e._v("主 题 管 理")]),a("span",{staticClass:"title-text-small"},[e._v("Thread Management")]),a("div",{staticClass:"title-btn"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"创建主题",placement:"left"}},[a("el-button",{attrs:{type:"success",icon:"el-icon-plus",circle:""},on:{click:e.handleCreateOpen}})],1)],1)]),a("el-divider"),a("div",{ref:"threadTable",staticClass:"thread"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.threadLoding,expression:"threadLoding"}],staticStyle:{width:"100%"},attrs:{data:e.threadList,"max-height":e.threadListHeight}},[a("el-table-column",{attrs:{prop:"tid",label:"ID","min-width":"20",sortable:""}}),a("el-table-column",{attrs:{prop:"tname",label:"标题","min-width":"70"}}),a("el-table-column",{attrs:{prop:"ttime",label:"时间","min-width":"50",formatter:e.dateFormat,sortable:""}}),a("el-table-column",{attrs:{prop:"ttop",label:"置顶","min-width":"20",formatter:e.topFormat,sortable:""}}),a("el-table-column",{attrs:{prop:"fname",label:"分区","min-width":"30",sortable:""}}),a("el-table-column",{attrs:{prop:"uname",label:"用户","min-width":"30",sortable:""}}),a("el-table-column",{attrs:{label:"操作","min-width":"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"success"},on:{click:function(a){return e.handleEditOpen(t.row.tid)}}}),0===t.row.ttop?a("el-button",{attrs:{size:"mini",icon:"el-icon-top",type:"primary"},on:{click:function(a){return e.setTopThread(t.row.tid)}}}):a("el-button",{attrs:{size:"mini",icon:"el-icon-bottom",type:"primary"},on:{click:function(a){return e.setDetopThread(t.row.tid)}}}),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row.tid)}}})]}}])})],1)],1),a("div",{ref:"threadPag",staticClass:"thread-pagination"},[a("el-pagination",{attrs:{layout:"total, prev, pager, next","current-page":e.query.pageIndex,"page-size":e.query.pageSize,total:e.pageTotal},on:{"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"修 改 主 题",visible:e.editDialogVisible,width:"60%",top:"6vh","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,"destroy-on-close":!0,center:""},on:{"update:visible":function(t){e.editDialogVisible=t}}},[a("div",{staticClass:"editFormDiv"},[a("el-form",{ref:"editForm",attrs:{"label-position":"left",model:e.threadDetail,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{maxlength:"40","show-word-limit":""},model:{value:e.threadDetail.tname,callback:function(t){e.$set(e.threadDetail,"tname",t)},expression:"threadDetail.tname"}})],1),a("el-form-item",{attrs:{label:"内容"}},[a("el-input",{attrs:{type:"textarea",maxlength:"10000",autosize:{minRows:10,maxRows:18},"show-word-limit":""},model:{value:e.threadDetail.tcont,callback:function(t){e.$set(e.threadDetail,"tcont",t)},expression:"threadDetail.tcont"}})],1)],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleEditClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleEditConfirm(e.threadDetail.tid)}}},[e._v("确 定")])],1)]),a("el-dialog",{attrs:{title:"新 增 主 题",visible:e.createDialogVisible,width:"60%",top:"6vh","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,"destroy-on-close":!0,center:""},on:{"update:visible":function(t){e.createDialogVisible=t}}},[a("div",{staticClass:"createFormDiv"},[a("el-form",{ref:"createForm",attrs:{"label-position":"left",model:e.threadCreate,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{maxlength:"40","show-word-limit":""},model:{value:e.threadCreate.tname,callback:function(t){e.$set(e.threadCreate,"tname",t)},expression:"threadCreate.tname"}})],1),a("el-form-item",{attrs:{label:"内容"}},[a("el-input",{attrs:{type:"textarea",maxlength:"10000",autosize:{minRows:8,maxRows:16},"show-word-limit":""},model:{value:e.threadCreate.tcont,callback:function(t){e.$set(e.threadCreate,"tcont",t)},expression:"threadCreate.tcont"}})],1),a("el-form-item",{attrs:{label:"分区"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.threadCreate.fid,callback:function(t){e.$set(e.threadCreate,"fid",t)},expression:"threadCreate.fid"}},e._l(e.forumList,(function(e){return a("el-option",{key:e.fid,attrs:{label:e.fname,value:e.fid}})})),1)],1)],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleCreateClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.createThread}},[e._v("确 定")])],1)])],1)},r=[],s=a("7f45"),n=a.n(s),o={name:"ThreadMgr",data:function(){return{query:{pageIndex:1,pageSize:20},pageTotal:0,threadListHeight:.75*window.innerHeight,threadList:[],threadLoding:!0,threadDetail:{tid:"",tname:"",tcont:""},threadCreate:{tname:"",tcont:"",fid:1},editDialogVisible:!1,createDialogVisible:!1}},created:function(){var e=this;this.$axios.get("/api/forum").then((function(t){1===t.data.code?e.forumList=t.data.data:e.$message({message:"系统错误",type:"error"})})).catch((function(){e.$message({message:"网络错误",type:"error"})})),this.getThreadList(this.query.pageIndex)},methods:{handleEditOpen:function(e){this.getThreadDetail(e),this.editDialogVisible=!0},handleEditClose:function(){this.threadDetail="",this.editDialogVisible=!1},handleEditConfirm:function(e){var t=this;this.$axios.put("/api/thread/"+e,this.threadDetail).then((function(e){1===e.data.code?(t.$message({message:"修改成功",type:"success"}),t.handleEditClose()):t.$message({message:"系统错误或权限不足",type:"error"})})).catch((function(){t.$message({message:"网络错误",type:"error"})}))},handleDelete:function(e){var t=this;this.$confirm("确认删除主题（ID："+e+"）?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteThread(e)}))},handleDeltetClose:function(){console.log("")},handleCreateOpen:function(){this.threadCreate.tname="",this.threadCreate.tcont="",this.threadCreate.fid=1,this.createDialogVisible=!0},handleCreateClose:function(){this.threadCreate.tname="",this.threadCreate.tcont="",this.threadCreate.fid=1,this.createDialogVisible=!1},dateFormat:function(e,t){var a=e[t.property];return void 0===a?"":n()(a).tz("Asia/Shanghai").format("YYYY-MM-DD HH:mm:ss")},topFormat:function(e,t){var a=e[t.property];return void 0===a?"":1===a?"是":"否"},delFormat:function(e,t){var a=e[t.property];return void 0===a?"":1===a?"是":"否"},getThreadList:function(e){var t=this;this.threadLoding=!0,this.$axios.get("/api/thread",{params:{page:e}}).then((function(e){1===e.data.code&&(t.threadList=e.data.data.list,t.pageTotal=e.data.data.total,t.threadLoding=!1)}))},handleCurrentChange:function(e){this.query.pageIndex=e,this.getThreadList(this.query.pageIndex)},getThreadDetail:function(e){var t=this;this.$axios.get("/api/thread/"+e).then((function(e){1===e.data.code?t.threadDetail=e.data.data:(t.$message({message:"系统错误",type:"error"}),t.threadDetail="")})).catch((function(){t.$message({message:"网络错误",type:"error"}),t.threadDetail=""}))},setTopThread:function(e){var t=this;this.$axios.put("/api/top/"+e).then((function(e){1===e.data.code?t.$message({message:"主题置顶成功",type:"success"}):t.$message({message:"系统错误或权限不足",type:"error"}),t.getThreadList(t.query.pageIndex)})).catch((function(){t.$message({message:"网络错误",type:"error"})}))},setDetopThread:function(e){var t=this;this.$axios.delete("/api/top/"+e).then((function(e){1===e.data.code?t.$message({message:"主题已取消置顶",type:"success"}):t.$message({message:"系统错误或权限不足",type:"error"}),t.getThreadList(t.query.pageIndex)})).catch((function(){t.$message({message:"网络错误",type:"error"})}))},deleteThread:function(e){var t=this;this.$axios.delete("/api/thread/"+e).then((function(e){1===e.data.code?t.$message({message:"主题已删除",type:"success"}):t.$message({message:"系统错误或权限不足",type:"error"}),t.getThreadList(t.query.pageIndex)})).catch((function(){t.$message({message:"网络错误",type:"error"})}))},createThread:function(){var e=this;this.$axios.post("/api/thread",this.threadCreate).then((function(t){1===t.data.code?e.$message({message:"新增主题成功",type:"success"}):e.$message({message:"系统错误或权限不足",type:"error"}),e.getThreadList(e.query.pageIndex),e.handleCreateClose()})).catch((function(){e.$message({message:"网络错误",type:"error"})}))}}},l=o,d=(a("3607"),a("2877")),c=Object(d["a"])(l,i,r,!1,null,"ad7b21e0",null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2f866c18.7d52dd0a.js.map